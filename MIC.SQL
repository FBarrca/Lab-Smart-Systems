CREATE TABLE BUILDING
(
	ID_BUILDING  INTEGER  NOT NULL 
);


CREATE  UNIQUE INDEX XPKBUILDING ON BUILDING
(
	ID_BUILDING  ASC
);


ALTER TABLE BUILDING
	ADD CONSTRAINT  XPKBUILDING PRIMARY KEY (ID_BUILDING);


CREATE TABLE BUILDING_SPACE
(
	ID_SPACE  INTEGER  NOT NULL ,
	ID_SUPER_SPACE  INTEGER  NULL ,
	ID_BUILDING  INTEGER  NOT NULL ,
	DESCRIPTION  VARCHAR(20)  NULL ,
	LFT  INTEGER  NOT NULL ,
	RGT  INTEGER  NOT NULL 
);


CREATE  UNIQUE INDEX XPKBUILDING_SPACE ON BUILDING_SPACE
(
	ID_SPACE  ASC
);


ALTER TABLE BUILDING_SPACE
	ADD CONSTRAINT  XPKBUILDING_SPACE PRIMARY KEY (ID_SPACE);


CREATE TABLE CUSTOMER
(
	ID_CUSTOMER  INTEGER  NOT NULL ,
	NAME  VARCHAR(20)  NULL 
);


CREATE  UNIQUE INDEX XPKCUSTOMER ON CUSTOMER
(
	ID_CUSTOMER  ASC
);


ALTER TABLE CUSTOMER
	ADD CONSTRAINT  XPKCUSTOMER PRIMARY KEY (ID_CUSTOMER);


CREATE TABLE CUSTOMER_BUILDING
(
	ID_CUSTOMER  INTEGER  NOT NULL ,
	ID_BUILDING  INTEGER  NOT NULL 
);


CREATE  UNIQUE INDEX XPKCUSTOMER_BUILDING ON CUSTOMER_BUILDING
(
	ID_CUSTOMER  ASC,
	ID_BUILDING  ASC
);


ALTER TABLE CUSTOMER_BUILDING
	ADD CONSTRAINT  XPKCUSTOMER_BUILDING PRIMARY KEY (ID_CUSTOMER,ID_BUILDING);


CREATE TABLE VARIABLE
(
	ID_VARIABLE  INTEGER  NOT NULL ,
	ID_SPACE  INTEGER  NULL ,
	ID_VARIABLE_TYPE  INTEGER  NOT NULL ,
	DESCRIPTION  VARCHAR(20)  NULL 
);


CREATE  UNIQUE INDEX XPKVARIABLE ON VARIABLE
(
	ID_VARIABLE  ASC
);


ALTER TABLE VARIABLE
	ADD CONSTRAINT  XPKVARIABLE PRIMARY KEY (ID_VARIABLE);


CREATE TABLE VARIABLE_TYPE
(
	ID_VARIABLE_TYPE  INTEGER  NOT NULL ,
	DESCRIPTION  VARCHAR(20)  NULL 
);


CREATE  UNIQUE INDEX XPKVARIABLE_TYPE ON VARIABLE_TYPE
(
	ID_VARIABLE_TYPE  ASC
);


ALTER TABLE VARIABLE_TYPE
	ADD CONSTRAINT  XPKVARIABLE_TYPE PRIMARY KEY (ID_VARIABLE_TYPE);


CREATE TABLE VARIABLE_VALUES
(
	ID_VARIABLE  INTEGER  NOT NULL ,
	INFO_DATE  DATE  NOT NULL ,
	VALUE  FLOAT  NOT NULL 
);


CREATE  UNIQUE INDEX XPKVARIABLE_VALUES ON VARIABLE_VALUES
(
	ID_VARIABLE  ASC,
	INFO_DATE  ASC
);


ALTER TABLE VARIABLE_VALUES
	ADD CONSTRAINT  XPKVARIABLE_VALUES PRIMARY KEY (ID_VARIABLE,INFO_DATE);


ALTER TABLE BUILDING_SPACE
	ADD (CONSTRAINT  R_8 FOREIGN KEY (ID_BUILDING) REFERENCES BUILDING(ID_BUILDING));


ALTER TABLE BUILDING_SPACE
	ADD (CONSTRAINT  R_13 FOREIGN KEY (ID_SUPER_SPACE) REFERENCES BUILDING_SPACE(ID_SPACE) ON DELETE SET NULL);


ALTER TABLE CUSTOMER_BUILDING
	ADD (CONSTRAINT  R_9 FOREIGN KEY (ID_CUSTOMER) REFERENCES CUSTOMER(ID_CUSTOMER));


ALTER TABLE CUSTOMER_BUILDING
	ADD (CONSTRAINT  R_10 FOREIGN KEY (ID_BUILDING) REFERENCES BUILDING(ID_BUILDING));


ALTER TABLE VARIABLE
	ADD (CONSTRAINT  R_7 FOREIGN KEY (ID_SPACE) REFERENCES BUILDING_SPACE(ID_SPACE) ON DELETE SET NULL);


ALTER TABLE VARIABLE
	ADD (CONSTRAINT  R_12 FOREIGN KEY (ID_VARIABLE_TYPE) REFERENCES VARIABLE_TYPE(ID_VARIABLE_TYPE));


ALTER TABLE VARIABLE_VALUES
	ADD (CONSTRAINT  R_11 FOREIGN KEY (ID_VARIABLE) REFERENCES VARIABLE(ID_VARIABLE));


